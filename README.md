# Media Seal RS

ä¸€ä¸ªç”¨Rustå®ç°çš„æ•°å­—æ°´å°CLIå·¥å…·ï¼Œæ”¯æŒç»™å›¾ç‰‡å’ŒéŸ³é¢‘æ–‡ä»¶æ·»åŠ å’Œæå–æ•°å­—æ°´å°ã€‚

## ç‰¹æ€§

- ğŸ–¼ï¸ **å›¾ç‰‡æ°´å°**: æ”¯æŒJPG, PNG, BMP, GIF, TIFF, WebPç­‰æ ¼å¼
- ğŸµ **éŸ³é¢‘æ°´å°**: æ”¯æŒWAVæ ¼å¼
- ğŸ”¢ **å¤šç§ç®—æ³•**: 
  - DCT (ç¦»æ•£ä½™å¼¦å˜æ¢)
  - DWT (ç¦»æ•£å°æ³¢å˜æ¢)
- âš¡ **é«˜æ€§èƒ½**: åŸºäºRustï¼Œå®‰å…¨ä¸”é«˜æ•ˆ
- ğŸ¯ **ç²¾ç¡®æ§åˆ¶**: å¯è°ƒèŠ‚æ°´å°å¼ºåº¦

## å®‰è£…

### ä»æºç æ„å»º

ç¡®ä¿ä½ å·²ç»å®‰è£…äº†Rustå’ŒCargoï¼Œç„¶åè¿è¡Œï¼š

```bash
git clone <repository-url>
cd media-seal-rs
cargo build --release
```

ç¼–è¯‘åçš„å¯æ‰§è¡Œæ–‡ä»¶ä½äº `target/release/media-seal-rs`

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬è¯­æ³•

```bash
media-seal-rs <COMMAND> [OPTIONS]
```

### å‘½ä»¤

#### åµŒå…¥æ°´å° (embed)

```bash
media-seal-rs embed -i <è¾“å…¥æ–‡ä»¶> -o <è¾“å‡ºæ–‡ä»¶> -w <æ°´å°å†…å®¹> [-a <ç®—æ³•>] [-s <å¼ºåº¦>]
```

**å‚æ•°è¯´æ˜:**
- `-i, --input <æ–‡ä»¶>`: è¾“å…¥æ–‡ä»¶è·¯å¾„
- `-o, --output <æ–‡ä»¶>`: è¾“å‡ºæ–‡ä»¶è·¯å¾„  
- `-w, --watermark <æ–‡æœ¬>`: æ°´å°å†…å®¹
- `-a, --algorithm <ç®—æ³•>`: ä½¿ç”¨çš„ç®—æ³• (dct æˆ– dwtï¼Œé»˜è®¤: dct)
- `-s, --strength <å¼ºåº¦>`: æ°´å°å¼ºåº¦ 0.0-1.0 (é»˜è®¤: 0.1)
- `-v, --verbose`: è¯¦ç»†è¾“å‡º

**ç¤ºä¾‹:**

```bash
# ç»™å›¾ç‰‡æ·»åŠ æ°´å°
media-seal-rs embed -i photo.jpg -o photo_watermarked.jpg -w "ç‰ˆæƒæ‰€æœ‰" -a dct -s 0.1

# ç»™éŸ³é¢‘æ·»åŠ æ°´å°
media-seal-rs embed -i audio.wav -o audio_watermarked.wav -w "æˆ‘çš„éŸ³ä¹" -a dwt -s 0.05
```

#### æå–æ°´å° (extract)

```bash
media-seal-rs extract -i <è¾“å…¥æ–‡ä»¶> [-a <ç®—æ³•>] [-o <è¾“å‡ºæ–‡ä»¶>]
```

**å‚æ•°è¯´æ˜:**
- `-i, --input <æ–‡ä»¶>`: åŒ…å«æ°´å°çš„æ–‡ä»¶è·¯å¾„
- `-a, --algorithm <ç®—æ³•>`: ä½¿ç”¨çš„ç®—æ³• (dct æˆ– dwtï¼Œé»˜è®¤: dct)
- `-o, --output <æ–‡ä»¶>`: ä¿å­˜æå–æ°´å°çš„æ–‡ä»¶ (å¯é€‰)
- `-v, --verbose`: è¯¦ç»†è¾“å‡º

**ç¤ºä¾‹:**

```bash
# ä»å›¾ç‰‡æå–æ°´å°
media-seal-rs extract -i photo_watermarked.jpg -a dct

# ä»éŸ³é¢‘æå–æ°´å°å¹¶ä¿å­˜åˆ°æ–‡ä»¶
media-seal-rs extract -i audio_watermarked.wav -a dwt -o extracted_watermark.txt
```

## ç®—æ³•è¯´æ˜

### DCT (ç¦»æ•£ä½™å¼¦å˜æ¢)

- **ä¼˜ç‚¹**: é²æ£’æ€§å¥½ï¼ŒæŠ—å‹ç¼©èƒ½åŠ›å¼ºï¼Œé«˜æ€§èƒ½å®ç°
- **é€‚ç”¨**: éœ€è¦è¾ƒå¼ºæŠ—æ”»å‡»èƒ½åŠ›çš„åœºæ™¯
- **ç‰¹æ€§**: 
  - ä½¿ç”¨`rustdct`åº“ï¼Œæ€§èƒ½ä¼˜å¼‚
  - æ”¯æŒä»»æ„å°ºå¯¸å›¾åƒï¼ˆè‡ªåŠ¨å¡«å……ï¼‰
  - åŸºäº8Ã—8å—å¤„ç†

### DWT (ç¦»æ•£å°æ³¢å˜æ¢)

- **ä¼˜ç‚¹**: å¤šåˆ†è¾¨ç‡åˆ†æï¼Œå±€éƒ¨åŒ–ç‰¹æ€§å¥½
- **é€‚ç”¨**: éœ€è¦ä¿æŒå›¾ç‰‡è´¨é‡çš„åœºæ™¯
- **è¦æ±‚**: å›¾ç‰‡å°ºå¯¸éœ€è¦æ˜¯2çš„å¹‚

## æ”¯æŒæ ¼å¼

### å›¾ç‰‡æ ¼å¼
- JPEG (.jpg, .jpeg)
- PNG (.png)
- BMP (.bmp)
- GIF (.gif)
- TIFF (.tiff)
- WebP (.webp)

### éŸ³é¢‘æ ¼å¼
- WAV (.wav, .wave)

## æ³¨æ„äº‹é¡¹

1. **æ°´å°é•¿åº¦**: ç¡®ä¿æ°´å°æ–‡æœ¬é•¿åº¦é€‚ä¸­ï¼Œè¿‡é•¿çš„æ°´å°å¯èƒ½å½±å“åµŒå…¥æ•ˆæœ
2. **å¼ºåº¦è®¾ç½®**: 
   - å¼ºåº¦è¿‡ä½å¯èƒ½å¯¼è‡´æ°´å°æå–å›°éš¾
   - å¼ºåº¦è¿‡é«˜å¯èƒ½å½±å“åª’ä½“è´¨é‡
   - å»ºè®®èŒƒå›´: 0.05-0.2
3. **æ ¼å¼å…¼å®¹**: DCTç®—æ³•ç°å·²æ”¯æŒä»»æ„å°ºå¯¸å›¾åƒï¼ŒDWTè¦æ±‚å›¾åƒå°ºå¯¸ä¸º2çš„å¹‚
4. **è´¨é‡ä¿æŒ**: åµŒå…¥æ°´å°ä¼šè½»å¾®å½±å“åŸå§‹åª’ä½“è´¨é‡

## å¼€å‘

### é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ main.rs          # CLIä¸»ç¨‹åº
â”œâ”€â”€ lib.rs           # åº“å…¥å£
â”œâ”€â”€ cli.rs           # å‘½ä»¤è¡Œå‚æ•°å®šä¹‰
â”œâ”€â”€ error.rs         # é”™è¯¯å¤„ç†
â”œâ”€â”€ watermark/       # æ°´å°ç®—æ³•æ¨¡å—
â”‚   â”œâ”€â”€ mod.rs
â”‚   â”œâ”€â”€ trait.rs     # é€šç”¨æ¥å£
â”‚   â”œâ”€â”€ dct.rs       # DCTç®—æ³•å®ç°
â”‚   â””â”€â”€ dwt.rs       # DWTç®—æ³•å®ç°
â””â”€â”€ media/           # åª’ä½“å¤„ç†æ¨¡å—
    â”œâ”€â”€ mod.rs
    â”œâ”€â”€ image.rs     # å›¾ç‰‡å¤„ç†
    â””â”€â”€ audio.rs     # éŸ³é¢‘å¤„ç†
```

### ä½œä¸ºåº“ä½¿ç”¨

```rust
use media_seal_rs::prelude::*;

fn main() -> Result<()> {
    // åˆ›å»ºç®—æ³•
    let algorithm = WatermarkFactory::create_algorithm(Algorithm::Dct)?;
    
    // åµŒå…¥æ°´å°
    ImageWatermarker::embed_watermark(
        "input.jpg",
        "output.jpg",
        "æˆ‘çš„æ°´å°",
        algorithm.as_ref(),
        0.1
    )?;
    
    // æå–æ°´å°
    let watermark = ImageWatermarker::extract_watermark(
        "output.jpg",
        algorithm.as_ref(),
        4 // æ°´å°å­—ç¬¦æ•°
    )?;
    
    println!("æå–çš„æ°´å°: {}", watermark);
    Ok(())
}
```

### è¿è¡Œæµ‹è¯•

```bash
cargo test
```

### æ€§èƒ½æµ‹è¯•

```bash
cargo bench
```

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## è®¸å¯

[MIT License](LICENSE)

## æ›´æ–°æ—¥å¿—

### v0.1.1 - DCTç®—æ³•ä¼˜åŒ–
- âœ… ä½¿ç”¨`rustdct`åº“æ›¿æ¢è‡ªå®ç°çš„DCTç®—æ³•
- âœ… æ”¯æŒä»»æ„å°ºå¯¸å›¾åƒï¼ˆè‡ªåŠ¨å¡«å……å¤„ç†ï¼‰
- âœ… æ˜¾è‘—æå‡DCTç®—æ³•æ€§èƒ½
- âœ… æ”¹è¿›é”™è¯¯æç¤ºä¿¡æ¯

## TODO

- [ ] æ”¯æŒæ›´å¤šå›¾ç‰‡æ ¼å¼
- [ ] æ”¯æŒMP3ç­‰éŸ³é¢‘æ ¼å¼  
- [ ] è§†é¢‘æ°´å°åŠŸèƒ½
- [ ] GUIç•Œé¢
- [ ] æ°´å°å¼ºåº¦è‡ªåŠ¨ä¼˜åŒ–
- [ ] æ‰¹é‡å¤„ç†åŠŸèƒ½
